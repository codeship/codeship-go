- type: parallel
  steps:
  - service: go1.9
    name: "lint"
    command: make setup lint
  - service: go1.9
    name: "1.9 test"
    command: make test
  - service: go1.8
    name: "1.8 test"
    command: make test
  - service: go1.10rc
    name: "1.10rc test"
    command: make test
  - service: goveralls
    name: "coveralls"
    command: go test -v -covermode=count -coverprofile=coverage.out && $GOPATH/bin/goveralls -coverprofile=coverage.out -service=codeship

- service: integration
  name: "integration tests"
  tag: master
  command: go test -tags integration -v ./integration/...
